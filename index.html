<!DOCTYPE html>
<html lang="en"> 
  <head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/LoginTemplateWhatsTheMove.css">
    <link rel="icon" href="images/Disco_Ball_Favicon.png" type="image/png" />   
    <title>What's The Move?</title>    
  </head>  
  <body>           
  <section>
    <div class="login-wrapper">
      <form action="" class="form"> 
        <h2>What's The Move?</h2>   
        <div class="input-group">
          <input type="text" name="loginUser" id="loginUser" placeholder="Enter City" >
          </input>
        </div>
        <ul class="dropdown-menu">
            <li><a href="#">Albuquerque</a></li>
            <li><a href="#">Lubbock</a></li>
            <li><a href="#">Princeton</a></li>
            <li><a href="#">Salt Lake City</a></li>
            <li><a href="#">Seattle</a></li>
        </ul>
      </form>              
    </div>
  </section> 

  <script>
    cities = ['albuquerque', "lubbock", "princeton",
     "saltlakecity", "seattle"];
    // Toggle the dropdown menu
    document.querySelector(".input-group input").addEventListener("click", function(event) {
      document.querySelector(".dropdown-menu").style.display = "block";
      event.stopPropagation();
    });

    // Close the dropdown menu if the user clicks outside of it
    document.querySelector("body").addEventListener("click", function(event) {
        var dropdowns = document.querySelector(".dropdown-menu").style.display = "none";
        event.stopPropagation();
    });

    // Filter the dropdown menu based on the user's input
    document.getElementById("loginUser").addEventListener("keyup", function(event) {
      this.style.color = 'white';
      var input = this.value.toLowerCase();
      var items = document.querySelectorAll(".dropdown-menu li a");
      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        if (item.innerHTML.toLowerCase().indexOf(input) > -1) {
          item.style.display = "";
        } else {
          item.style.display = "none";
        }
      }
    });

    // Autocomplete the search with the selected dropdown menu item
    document.querySelectorAll(".dropdown-menu li a").forEach(item => item.addEventListener("click", function(event) {
      document.getElementById("loginUser").value = item.textContent; // set input value to selected option
      document.getElementById("loginUser").focus();
      document.getElementById("dropdown-menu").style.display = "none";
      event.stopPropagation();
    })
    );


    // Redirect to the next page when the user hits enter
    document.getElementById("loginUser").addEventListener("keypress", function(event) {
      if (event.keyCode === 13) {
        cityInput = this.value.toLowerCase().replace(/\s/g, "");
        event.preventDefault();
        console.log(cities.includes(cityInput));
        if(cities.includes(cityInput)) {
          this.setCustomValidity("");
          this.classList.remove('shake');
          window.location.href = `${cityInput}.html`;
        } else {
          this.classList.add('shake');
          setTimeout(() => {
            this.setCustomValidity("Did not recognize city!");
          }, 100);
        }
      }
    });

    document.getElementById("loginUser").addEventListener('animationend', () => {
      this.classList.remove('shake');
    });
  </script>
</body>
 
</br>
</br> 
</br>
</br>
</br> 
</br>   
</br>
</br> 
</br>
</br>
</br> 
</br>  
     
</body>
</html>
